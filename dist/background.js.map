{"mappings":"A,C,KCAA,IAAI,EAAQ,KAEN,EAAiB,AAAC,IAEtB,OAAO,SAAS,CAAC,aAAa,CAAC,CAC7B,OAAQ,CAAE,MAAA,CAAM,EAChB,MAAO,OACP,KAAM,CAAC,GAAG,KACR,IAAM,EAAoB,2BAC1B,CAAA,MAAM,CAAC,EAAkB,CAAG,MAAM,CAAC,EAAkB,EAAI,CAAC,EAC1D,MAAM,CAAC,EAAkB,CAAC,IAAI,CAAG,GAAQ,EAAE,AAC7C,EACA,KAAM,CAAC,EAAM,AACf,GAAG,IAAI,CAAC,KAEN,OAAO,SAAS,CAAC,aAAa,CAAC,CAC7B,OAAQ,CAAE,MAAA,CAAM,EAChB,MAAO,OACP,MAAO,CAAC,cAAc,AACxB,EACF,EACF,EAEA,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,EAAO,EAAY,KAC1B,aAAtB,EAAW,MAAM,EAAmB,EAAI,GAAG,GAC7C,aAAa,GAEb,EAAQ,WAAW,KACjB,EAAe,EACjB,EAAG,KAEP,GAEA,OAAO,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC,KACrC,OAAO,qBAAqB,CAAC,kBAAkB,CAAC,CAC9C,SAAU,CACR,CACE,GAAI,EACJ,SAAU,EACV,OAAQ,CACN,KAAM,gBACN,gBAAiB,CACf,CAAE,OAAQ,8BAA+B,UAAW,MAAO,MAAO,GAAI,EACvE,AACH,EACA,UAAW,CACT,cAAe,CAAC,QAAQ,CACxB,UAAW,GACb,CACF,EACD,CACD,cAAe,CAAC,EAAE,AACpB,EACF,E,C","sources":["<anon>","src/background.ts"],"sourcesContent":["(() => {\nlet $f38e5b3eeb655060$var$timer = null;\nconst $f38e5b3eeb655060$var$injectedHelper = (tabId)=>{\n    // 注入 tabId 参数\n    chrome.scripting.executeScript({\n        target: {\n            tabId: tabId\n        },\n        world: \"MAIN\",\n        func: (...args)=>{\n            const DOM_SHOT_EXT_NAME = \"dom_shot_chrome_extension\";\n            window[DOM_SHOT_EXT_NAME] = window[DOM_SHOT_EXT_NAME] || {};\n            window[DOM_SHOT_EXT_NAME].args = args || [];\n        },\n        args: [\n            tabId\n        ]\n    }).then(()=>{\n        // 执行脚本\n        chrome.scripting.executeScript({\n            target: {\n                tabId: tabId\n            },\n            world: \"MAIN\",\n            files: [\n                \"./helper.js\"\n            ]\n        });\n    });\n};\nchrome.tabs.onUpdated.addListener((tabId, changeInfo, tab)=>{\n    if (changeInfo.status === \"complete\" && tab.url) {\n        clearTimeout($f38e5b3eeb655060$var$timer);\n        $f38e5b3eeb655060$var$timer = setTimeout(()=>{\n            $f38e5b3eeb655060$var$injectedHelper(tabId);\n        }, 100);\n    }\n});\nchrome.runtime.onInstalled.addListener(()=>{\n    chrome.declarativeNetRequest.updateDynamicRules({\n        addRules: [\n            {\n                id: 1,\n                priority: 1,\n                action: {\n                    type: \"modifyHeaders\",\n                    responseHeaders: [\n                        {\n                            header: \"Access-Control-Allow-Origin\",\n                            operation: \"set\",\n                            value: \"*\"\n                        }\n                    ]\n                },\n                condition: {\n                    resourceTypes: [\n                        \"image\"\n                    ],\n                    urlFilter: \"*\"\n                }\n            }\n        ],\n        removeRuleIds: [\n            1\n        ]\n    });\n});\n\n})();\n//# sourceMappingURL=background.js.map\n","let timer = null;\n\nconst injectedHelper = (tabId: number) => {\n  // 注入 tabId 参数\n  chrome.scripting.executeScript({\n    target: { tabId },\n    world: \"MAIN\",\n    func: (...args) => {\n      const DOM_SHOT_EXT_NAME = 'dom_shot_chrome_extension';\n      window[DOM_SHOT_EXT_NAME] = window[DOM_SHOT_EXT_NAME] || {};\n      window[DOM_SHOT_EXT_NAME].args = args || [];\n    },\n    args: [tabId]\n  }).then(() => {\n    // 执行脚本\n    chrome.scripting.executeScript({\n      target: { tabId },\n      world: \"MAIN\",\n      files: ['./helper.js']\n    });\n  });\n};\n\nchrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\n  if (changeInfo.status === 'complete' && tab.url) {\n    clearTimeout(timer);\n\n    timer = setTimeout(() => {\n      injectedHelper(tabId);\n    }, 100);\n  }\n});\n\nchrome.runtime.onInstalled.addListener(() => {\n  chrome.declarativeNetRequest.updateDynamicRules({\n    addRules: [\n      {\n        id: 1,\n        priority: 1,\n        action: {\n          type: \"modifyHeaders\",\n          responseHeaders: [\n            { header: \"Access-Control-Allow-Origin\", operation: \"set\", value: \"*\" }\n          ]\n        },\n        condition: {\n          resourceTypes: [\"image\"],\n          urlFilter: \"*\"\n        }\n      }\n    ],\n    removeRuleIds: [1]\n  });\n});"],"names":["$f38e5b3eeb655060$var$timer","$f38e5b3eeb655060$var$injectedHelper","tabId","chrome","scripting","executeScript","target","world","func","args","DOM_SHOT_EXT_NAME","window","then","files","tabs","onUpdated","addListener","changeInfo","tab","status","url","clearTimeout","setTimeout","runtime","onInstalled","declarativeNetRequest","updateDynamicRules","addRules","id","priority","action","type","responseHeaders","header","operation","value","condition","resourceTypes","urlFilter","removeRuleIds"],"version":3,"file":"background.js.map"}