{"mappings":"A,C,SEEO,EAAK,EAFL,IAAM,EAAoB,2BAErB,EAAA,EAAA,GAAA,CAAA,EAAA,CAAA,CAAA,EAAA,CAAA,EACV,KAAA,CAAA,EAAA,CAAA,QADU,CAAA,CAAA,EAEV,OAAA,CAAA,EAAA,CAAA,UDFF,IAAI,EAAQ,KAEN,EAAiB,AAAC,IACtB,cAAc;AACd,OAAO,SAAA,CAAU,aAAA,CAAc,CAC7B,OAAQ,CAAE,MAAA,CAAM,EAChB,MAAO,OACP,KAAM,CAAC,GAAG,KACR,MAAM,CAAC,EAAkB,CAAG,MAAM,CAAC,EAAkB,EAAI,CAAC,EAC1D,MAAM,CAAC,EAAkB,CAAC,IAAA,CAAO,GAAQ,EAAE,AAC7C,EACA,KAAM,CAAC,EAAM,AACf,GAAG,IAAA,CAAK,KACN,OAAO;AACP,OAAO,SAAA,CAAU,aAAA,CAAc,CAC7B,OAAQ,CAAE,MAAA,CAAM,EAChB,MAAO,OACP,MAAO,CAAC,cAAc,AACxB,EACF,EACF,EAEA,OAAO,IAAA,CAAK,SAAA,CAAU,WAAA,CAAY,CAAC,EAAO,EAAY,KAC1B,aAAtB,EAAW,MAAA,EAAyB,EAAI,GAAA,GAC1C,aAAa,GAEb,EAAQ,WAAW,KACjB,EAAe,EACjB,EAAG,KAEP,E,C,G,uC","sources":["<anon>","src/background.ts","src/utils/constant.ts"],"sourcesContent":["(() => {\nconst $b6370854aea1ab9c$export$14333815d08d1368 = \"dom_shot_chrome_extension\";\nvar $b6370854aea1ab9c$export$87e24ddbab2613d9;\n(function(DOM_SHOT_EXT_ACTION) {\n    DOM_SHOT_EXT_ACTION[DOM_SHOT_EXT_ACTION[\"ready\"] = 0] = \"ready\";\n    DOM_SHOT_EXT_ACTION[DOM_SHOT_EXT_ACTION[\"domShot\"] = 1] = \"domShot\";\n})($b6370854aea1ab9c$export$87e24ddbab2613d9 || ($b6370854aea1ab9c$export$87e24ddbab2613d9 = {}));\n\n\nlet $f38e5b3eeb655060$var$timer = null;\nconst $f38e5b3eeb655060$var$injectedHelper = (tabId)=>{\n    // 注入 tabId 参数\n    chrome.scripting.executeScript({\n        target: {\n            tabId: tabId\n        },\n        world: \"MAIN\",\n        func: (...args)=>{\n            window[0, $b6370854aea1ab9c$export$14333815d08d1368] = window[0, $b6370854aea1ab9c$export$14333815d08d1368] || {};\n            window[0, $b6370854aea1ab9c$export$14333815d08d1368].args = args || [];\n        },\n        args: [\n            tabId\n        ]\n    }).then(()=>{\n        // 执行脚本\n        chrome.scripting.executeScript({\n            target: {\n                tabId: tabId\n            },\n            world: \"MAIN\",\n            files: [\n                \"./helper.js\"\n            ]\n        });\n    });\n};\nchrome.tabs.onUpdated.addListener((tabId, changeInfo, tab)=>{\n    if (changeInfo.status === \"complete\" && tab.url) {\n        clearTimeout($f38e5b3eeb655060$var$timer);\n        $f38e5b3eeb655060$var$timer = setTimeout(()=>{\n            $f38e5b3eeb655060$var$injectedHelper(tabId);\n        }, 100);\n    }\n});\n\n})();\n//# sourceMappingURL=background.js.map\n","import { DOM_SHOT_EXT_NAME } from \"./utils/constant\";\n\nlet timer = null;\n\nconst injectedHelper = (tabId: number) => {\n  // 注入 tabId 参数\n  chrome.scripting.executeScript({\n    target: { tabId },\n    world: \"MAIN\",\n    func: (...args) => {\n      window[DOM_SHOT_EXT_NAME] = window[DOM_SHOT_EXT_NAME] || {};\n      window[DOM_SHOT_EXT_NAME].args = args || [];\n    },\n    args: [tabId]\n  }).then(() => {\n    // 执行脚本\n    chrome.scripting.executeScript({\n      target: { tabId },\n      world: \"MAIN\",\n      files: ['./helper.js']\n    });\n  });\n};\n\nchrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\n  if (changeInfo.status === 'complete' && tab.url) {\n    clearTimeout(timer);\n\n    timer = setTimeout(() => {\n      injectedHelper(tabId);\n    }, 100);\n  }\n});\n","export const DOM_SHOT_EXT_NAME = 'dom_shot_chrome_extension';\n\nexport enum DOM_SHOT_EXT_ACTION {\n  ready,\n  domShot,\n};\n"],"names":["$b6370854aea1ab9c$export$87e24ddbab2613d9","DOM_SHOT_EXT_ACTION","$b6370854aea1ab9c$export$14333815d08d1368","$f38e5b3eeb655060$var$timer","$f38e5b3eeb655060$var$injectedHelper","tabId","chrome","scripting","executeScript","target","world","func","args","window","then","files","tabs","onUpdated","addListener","changeInfo","tab","status","url","clearTimeout","setTimeout"],"version":3,"file":"background.js.map"}